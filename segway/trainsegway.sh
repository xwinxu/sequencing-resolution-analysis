#!/bin/bash
#$ -cwd

HOMEPATH=$1
ROOTPATH=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/
RES=$2
CELL=$3
ID=$4
FULLPATH=${ROOTPATH}${HOMEPATH}

source activate segway
export SEGWAY_RAND_SEED=17723
export DRMAA_LIBRARY_PATH=/sge/lib/linux-x64/libdrmaa.so

if [ "$CELL" == "K562seq" ]; then
    echo cell is K562seq
    segway --resolution=${RES} --cluster-opt="-q hoffmangroup" --mem-usage=10,14,16,20,40,55,64 --num-instances=10 --minibatch-fraction=0.01 --num-labels=10 --max-train-rounds=30 --exclude-coords=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-04-27_Train_Segway/exclude_coords.bed train /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_H2AZ_SRR6386684_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_H3K4me3_ENCFF000VDX_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_PolII_SRR6386683_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_TBP_SRR1185445_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_TFIIB_SRR502177.genomedata ${ROOTPATH}${HOMEPATH}train_results${ID}/
    echo segway --resolution=${RES} --cluster-opt="-q hoffmangroup" --mem-usage=10,14,16,20,40,55,64 --num-instances=10 --minibatch-fraction=0.01 --num-labels=10 --max-train-rounds=30 --exclude-coords=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-04-27_Train_Segway/exclude_coords.bed train /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_H2AZ_SRR6386684_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_H3K4me3_ENCFF000VDX_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_PolII_SRR6386683_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_TBP_SRR1185445_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562seq_TFIIB_SRR502177.genomedata ${ROOTPATH}${HOMEPATH}train_results${ID}/ 

elif [ "$CELL" == "MCF7seq" ]; then
    echo cell is MCF7seq
    segway --resolution=${RES} --cluster-opt="-q hoffmangroup" --mem-usage=10,14,16,20,40,55,64 --num-instances=10 --minibatch-fraction=0.01 --num-labels=10 --max-train-rounds=30 --exclude-coords=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-04-27_Train_Segway/exclude_coords.bed train /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7seq_CTCF_ENCFF000SAO_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7seq_ERalpha_SRR3170060.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7seq_FOXA1_ERR022028_1.genomedata ${ROOTPATH}${HOMEPATH}train_results${ID}/
    echo segway --resolution=${RES} --cluster-opt="-q hoffmangroup" --mem-usage=10,14,16,20,40,55,64 --num-instances=10 --minibatch-fraction=0.01 --num-labels=10 --max-train-rounds=30 --exclude-coords=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-04-27_Train_Segway/exclude_coords.bed train /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7seq_CTCF_ENCFF000SAO_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7seq_ERalpha_SRR3170060.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7seq_FOXA1_ERR022028_1.genomedata ${ROOTPATH}${HOMEPATH}train_results${ID}/


elif [ "$CELL" == "K562ex" ]; then
    echo cell is K562ex
    segway --resolution=${RES} --cluster-opt="-q hoffmangroup" --mem-usage=10,14,16,20,40,55,64 --num-instances=10 --minibatch-fraction=0.01 --num-labels=10 --max-train-rounds=30 --exclude-coords=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-04-27_Train_Segway/exclude_coords.bed train /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_H2AZ_SRR6386688_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_H3K4me3_SRR6386689_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_PolII_SRR3105728.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_TBP_SRR770729_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_TFIIB_SRR3105729.genomedata ${ROOTPATH}${HOMEPATH}train_results${ID}/
    echo segway --resolution=${RES} --cluster-opt="-q hoffmangroup" --mem-usage=10,14,16,20,40,55,64 --num-instances=10 --minibatch-fraction=0.01 --num-labels=10 --max-train-rounds=30 --exclude-coords=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-04-27_Train_Segway/exclude_coords.bed train /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_H2AZ_SRR6386688_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_H3K4me3_SRR6386689_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_PolII_SRR3105728.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_TBP_SRR770729_1.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/K562/K562ex_TFIIB_SRR3105729.genomedata ${ROOTPATH}${HOMEPATH}train_results${ID}/

else
    echo cell is MCF7ex
    segway --resolution=${RES} --cluster-opt="-q hoffmangroup" --mem-usage=10,14,16,20,40,55,64 --num-instances=10 --minibatch-fraction=0.01 --num-labels=10 --max-train-rounds=30 --exclude-coords=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-04-27_Train_Segway/exclude_coords.bed train /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7ex_CTCF_SRR6710671.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7ex_ERalpha_SRR6710667.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7ex_FOXA1_SRR6710669.genomedata ${ROOTPATH}${HOMEPATH}train_results${ID}/
    echo segway --resolution=${RES} --cluster-opt="-q hoffmangroup" --mem-usage=10,14,16,20,40,55,64 --num-instances=10 --minibatch-fraction=0.01 --num-labels=10 --max-train-rounds=30 --exclude-coords=/mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-04-27_Train_Segway/exclude_coords.bed train /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7ex_CTCF_SRR6710671.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7ex_ERalpha_SRR6710667.genomedata /mnt/work1/users/home2/winniexu/hoffmangroup/wxu/data/2018-05-07_Webscrap/genomedata/MCF7/MCF7ex_FOXA1_SRR6710669.genomedata ${ROOTPATH}${HOMEPATH}train_results${ID}/
fi
